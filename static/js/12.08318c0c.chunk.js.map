{"version":3,"sources":["components/Stringify/Stringify.js","components/Stringify/index.js","components/Text/TextWithSubscription.js","components/Text/TextWithEffectsList.js","components/UserCard/UserCard.js","components/UserCard/UserCardInvalidDependencies.js","views/EffectView.js"],"names":["Stringify","children","indent","className","JSON","stringify","commentReducer","all","comment","TextWithSubscription","useReducer","comments","addComment","useEffect","Api","subscribeComments","unsubscribeComments","commentCount","length","TextWithEffectsList","id","s","next","list","add","useLayoutEffect","map","text","key","UserCardInvalidDependencies","userId","useState","user","setUser","username","name","email","getUser","then","toggle","EffectView","visibleOne","toggleVisibilityOne","visibleTwo","toggleVisibilityTwo","visibleThree","toggleVisibilityThree","visibleFour","toggleVisibilityFour","setId","CodeBlock","fileName","Button","onClick","type","onChange","value","target","UserCard","Link","href"],"mappings":"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","file":"static/js/12.08318c0c.chunk.js","sourcesContent":["import React from 'react';\n\nconst Stringify = ({ children, indent, className }) => (\n    <pre className={`stringify ${className || ''}`}>\n        {JSON.stringify(children, null, indent)}\n    </pre>\n);\n\nexport default Stringify;\n","export { default } from './Stringify';\n","import React, { useReducer, useEffect } from 'react';\n\nimport Stringify from 'components/Stringify';\nimport Api from 'api';\n\nconst commentReducer = (all, comment) => [...all, comment];\n\nconst TextWithSubscription = () => {\n    const [comments, addComment] = useReducer(commentReducer, []);\n\n    useEffect(() => {\n        Api.subscribeComments(addComment);\n        return () => Api.unsubscribeComments(addComment);\n    }, []);\n\n    return (\n        <Stringify indent={2}>{{ commentCount: comments.length }}</Stringify>\n    );\n};\n\nexport default TextWithSubscription;\n","import React, { useReducer, useEffect, useLayoutEffect } from 'react';\n\nconst TextWithEffectsList = ({ id }) => {\n    const [list, add] = useReducer((s, next) => [...s, next], []);\n\n    useEffect(() => add('useEffect onMount'), []);\n    useLayoutEffect(() => add('useLayoutEffect onMount'), []);\n\n    useEffect(() => {\n        add(`useEffect onIdChange ID:${id}`);\n        add('----------------------'); // hide-line\n        return () => add(`cleanup of useEffect onIdChange #1 ID:${id}`);\n    }, [id]);\n\n    useLayoutEffect(() => {\n        add(`useLayoutEffect onIdChange ID:${id}`);\n        return () => add(`cleanup of useLayoutEffect onIdChange ID:${id}`);\n    }, [id]);\n\n    return (\n        <ul className='text-effects-list'>\n            {list.map((text, key) => (\n                <li key={key}>{text}</li>\n            ))}\n        </ul>\n    );\n};\n\nexport default TextWithEffectsList;\n","import React, { useState, useEffect } from 'react';\n\nimport Api from 'api';\n\nconst UserCardInvalidDependencies = ({ userId }) => {\n    const [user, setUser] = useState();\n    const { username, name, email } = user || {};\n\n    useEffect(() => {\n        Api.getUser(userId).then(setUser);\n        return setUser; // Reset previous user\n    }, [userId]);\n\n    if (!user) {\n        return <h2>Loading...</h2>;\n    }\n\n    return (\n        <div>\n            <h2>\n                {userId}: {name} ({username})\n            </h2>\n            <h3>@ {email}</h3>\n        </div>\n    );\n};\n\nexport default UserCardInvalidDependencies;\n","import React, { useState, useEffect } from 'react';\n\nimport Api from 'api';\n\nconst UserCardInvalidDependencies = ({ userId }) => {\n    const [user, setUser] = useState();\n    const { username, name, email } = user || {};\n\n    useEffect(() => {\n        Api.getUser(userId).then(setUser);\n        return setUser; // Reset previous user\n    }, []); // eslint-disable-line\n\n    if (!user) {\n        return <h2>Loading...</h2>;\n    }\n\n    return (\n        <div>\n            <h2>\n                {userId}: {name} ({username})\n            </h2>\n            <h3>@ {email}</h3>\n        </div>\n    );\n};\n\nexport default UserCardInvalidDependencies;\n","import React, { useState, useReducer } from 'react';\n\nimport { TextWithSubscription } from 'components/Text';\nimport Link from 'components/Link';\nimport UserCard, { UserCardInvalidDependencies } from 'components/UserCard';\nimport { TextWithEffectsList } from 'components/Text';\nimport { CodeBlockButton } from 'components/CodeBlock';\nimport Button from 'components/common/Button';\nimport { ApiSubscribers } from 'api';\n\nconst toggle = s => !s;\n\nconst EffectView = () => {\n    const [visibleOne, toggleVisibilityOne] = useReducer(toggle, false);\n    const [visibleTwo, toggleVisibilityTwo] = useReducer(toggle, false);\n    const [visibleThree, toggleVisibilityThree] = useReducer(toggle, false);\n    const [visibleFour, toggleVisibilityFour] = useReducer(toggle, false);\n    const [id, setId] = useState(1);\n\n    return (\n        <>\n            <h1>useEffect</h1>\n\n            <h2>onMount & onUnmount</h2>\n            <CodeBlockButton fileName='components/Text/TextWithSubscription.js' />\n            <Button onClick={toggleVisibilityOne}>\n                {visibleOne ? 'Unmount' : 'Mount'}\n            </Button>\n            <div>\n                <ApiSubscribers />\n                {visibleOne && <TextWithSubscription />}\n            </div>\n\n            <h2 className='margin-top-l'>Dependency array</h2>\n            <input\n                type='number'\n                className='common-input block margin-top-m'\n                onChange={({ target: { value } }) => setId(value)}\n                value={id}\n            />\n            <CodeBlockButton\n                fileName='components/UserCard/UserCardInvalidDependencies.js'\n                text='UserCardInvalidDependencies.js'\n            />\n            <Button onClick={toggleVisibilityTwo}>\n                {visibleTwo ? 'Unmount' : 'Mount'}\n            </Button>\n            <div>\n                {visibleTwo && <UserCardInvalidDependencies userId={id} />}\n            </div>\n\n            <CodeBlockButton\n                fileName='components/UserCard/UserCard.js'\n                text='UserCard.js'\n            />\n            <Button onClick={toggleVisibilityThree}>\n                {visibleThree ? 'Unmount' : 'Mount'}\n            </Button>\n            <div>{visibleThree && <UserCard userId={id} />}</div>\n\n            {visibleTwo && (\n                <pre className='quote'>\n                    If you’re trying to write an effect that behaves differently\n                    depending on whether the component renders for the first\n                    time or not, you’re swimming against the tide! We’re failing\n                    at synchronizing if our result depends on the “journey”\n                    rather than the “destination”.\n                    <Link href='https://overreacted.io/a-complete-guide-to-useeffect/#synchronization-not-lifecycle'>\n                        overreacted.io/a-complete-guide-to-useeffect\n                    </Link>\n                </pre>\n            )}\n\n            <h2 className='margin-top-l'>useEffect, useLayoutEffect</h2>\n            <input\n                type='number'\n                className='common-input block margin-top-m'\n                onChange={({ target: { value } }) => setId(value)}\n                value={id}\n            />\n            <CodeBlockButton\n                fileName='components/Text/TextWithEffectsList.js'\n                text='Code: Order of effects and cleanups'\n            />\n            <Button onClick={toggleVisibilityFour}>\n                {visibleFour ? 'Unmount' : 'Mount'}\n            </Button>\n            <div>{visibleFour && <TextWithEffectsList id={id} />}</div>\n        </>\n    );\n};\n\nexport default EffectView;\n"],"sourceRoot":""}